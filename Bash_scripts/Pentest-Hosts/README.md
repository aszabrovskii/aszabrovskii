
Script deleting_files.sh, deletes files Arecord.txt, staging_list.txt before scanning starts
The aws_subdomains_a.sh script generates DNS A and CNAME records (Arecord.txt -> staging_list.txt)
The scan_hosts_nmap.sh script scans hosts from the staging_list.txt list
The scan_hosts_zaproxy.sh script scans hosts from the staging_list.txt list
There should be a run interval in cron between scan_hosts_nmap.sh, scan_hosts_zaproxy.sh scripts.


Credits are stored with the user, to allow for automated and manual triggering using pipeline :
gitlab-runner /home/giltab-runner/.aws/config
gitlab-runner /home/giltab-runner/.aws/credentials
This script queries DNS records A, CNAME and generates the initial result in the file Arecord.txt.
Further the script performs line-by-line formation of hosts in the file staging_list.txt, to work with the programs nmap and zaproxy.
aws_subdomains_a.sh


NMAP
The scripts are located in the directory /home/$HOME/scripts/sh_scripts/scan_hosts_nmap.sh
scan_hosts_nmap.sh - The script is not run as root !
The script scans the hosts from staging_list.txt, at the end of scanning it creates report files with resolution *.gnmap *.nmap *.xml, we need to
convert the *.xml file to *.html file.
After conversion, the *.gnmap *.nmap *.xml *.html files are deleted.
After generating the report in *.html format, the scan_hosts_nmap.sh script calls the python3 script send_report_template_nmap.py and sends the
report to the specified address.


ZAPROXY
To run the script, run scan_hosts_zaproxy.sh
The scripts are located in the directory /home/$HOME/sh_scripts
staging_list.txt - The file contains a list of hosts accessed by the scan_hosts_zaproxy.sh script.
scan_hosts_zaproxy.sh - the script performs host scanning, after scanning is completed the zaproxy program creates a *.html file and after writing
data to the file it does not close the process, but remains waiting.
traking_html.sh - For this I wrote a script that monitors the creation and modification of the *.html file. If no data is written to the *.html file in the
last 20 seconds, it stops the current "SIGINT" program process with the kill_pid.sh script.
kill_pid.sh - The command sends an interrupt signal ("Ctrl + C") if the zaproxy program does not close the file after entering data into it.
This script must be run with root privileges to terminate the zaproxy program, which runs as root.
This script must be run with root privileges to terminate the zaproxy program, which runs as root.
After the report is generated in *.html format, the traking_html.sh script calls the python3 script send_report_template_owasp.py and sends the
report to the specified address.


The scripts send_report_template_nmap.py, and send_report_template_owasp.py are used to send reports to USER@MAIL.COM
The python scripts are located in the /home/$HOME/py_scripts directory
Python script send_report_template_nmap.py, to send nmap reports.
send_report_template_nmap.py